<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shop</title>
<style>
body {
    margin: 0;
    padding: 24px;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f6f7f9;
    color: #111;
}

header {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 16px;
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}

#filterButton {
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    background: #111;
    color: #fff;
    cursor: pointer;
    font-size: 14px;
}

#filterButton:hover {
    background: #000;
}

#filterMenu {
    position: absolute;
    top: 60px;
    right: 24px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    padding: 8px;
    display: none;
    z-index: 100;
}

#filterMenu.open {
    display: block;
}

#filterMenu button {
    display: block;
    width: 100%;
    padding: 10px 16px;
    border: none;
    background: transparent;
    text-align: left;
    cursor: pointer;
    border-radius: 8px;
    margin-bottom: 4px;
}

#filterMenu button:hover {
    background: #f6f7f9;
}

#filterMenu button.active {
    background: #111;
    color: #fff;
}

h6 {
    margin: 0 0 20px 0;
}

.layer {
    display: flex;
    gap: 16px;
    overflow-x: auto;
    padding-bottom: 6px;
    margin-bottom: 32px;
}

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
    gap: 16px;
    margin-bottom: 32px;
}

.product {
    background: #fff;
    border-radius: 14px;
    padding: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.06);
    display: flex;
    flex-direction: column;
}

.layer .product {
    min-width: 190px;
}

.product img {
    width: 100%;
    height: 130px;
    background: linear-gradient(135deg, #e9ecf1, #dfe3ea);
    border-radius: 10px;
    object-fit: cover;
}

.product .name {
    margin-top: 10px;
    font-weight: 600;
}

.product .mg {
    margin-top: 4px;
    font-size: 13px;
    color: #777;
}

.product .price {
    margin-top: 4px;
    color: #555;
    margin-bottom: auto;
}

.product button {
    margin-top: 20px;
    width: 100%;
    border: none;
    border-radius: 10px;
    padding: 10px;
    background: #111;
    color: #fff;
    cursor: pointer;
}

.product button:hover {
    background: #000;
}

#cartButton {
    position: fixed;
    bottom: 24px;
    right: 24px;
    padding: 14px 20px;
    border-radius: 999px;
    border: none;
    background: #111;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    font-size: 16px;
}

#cartWidget {
    position: fixed;
    top: 0;
    right: -100%;
    width: 320px;
    height: 100%;
    background: #fff;
    border-left: 1px solid #e5e7eb;
    padding: 16px;
    transition: right 0.3s ease;
    overflow-y: auto;
    box-shadow: -10px 0 30px rgba(0,0,0,0.08);
    z-index: 1000;
    visibility: hidden;
    box-sizing: border-box;
}

#cartWidget.open {
    right: 0;
    visibility: visible;
}

#cartWidget h3 {
    margin: 0 0 16px 0;
}

#cartWidget button {
    border: none;
    border-radius: 10px;
    padding: 10px;
    background: #111;
    color: #fff;
    cursor: pointer;
}

#cartWidget button:hover {
    background: #000;
}

#nameField {
    margin-top: 10px;
    width: 100%;
    box-sizing: border-box;
    padding: 10px;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
}

.footer-text {
    margin-top: 40px;
    font-size: 12px;
    color: #666;
}

#moreButton {
    display: block;
    margin: 40px auto 20px auto;
    padding: 14px 32px;
    border-radius: 10px;
    border: none;
    background: #111;
    color: #fff;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
}

#moreButton:hover {
    background: #000;
}

#extraWidget {
    position: fixed;
    top: 0;
    right: -100%;
    width: 90%;
    max-width: 900px;
    height: 100%;
    background: #fff;
    border-left: 1px solid #e5e7eb;
    padding: 20px;
    transition: right 0.3s ease;
    overflow-y: auto;
    box-shadow: -10px 0 30px rgba(0,0,0,0.08);
    z-index: 1000;
    visibility: hidden;
    box-sizing: border-box;
}

#extraWidget.open {
    right: 0;
    visibility: visible;
}

#extraWidget h2 {
    margin: 0 0 20px 0;
}

#notification {
    position: fixed;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    background: #111;
    color: #fff;
    padding: 14px 24px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    font-size: 15px;
    font-weight: 500;
    z-index: 2000;
    transition: top 0.3s ease;
}

#notification.show {
    top: 24px;
}

/* Mobile Anpassungen */
@media (max-width: 768px) {
    body {
        padding: 12px;
        padding-bottom: 80px;
    }

    header {
        font-size: 24px;
        margin-bottom: 16px;
    }

    .layer {
        gap: 10px;
        margin-bottom: 20px;
    }

    .layer .product {
        min-width: 145px;
    }

    .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(145px, 1fr));
        gap: 10px;
    }

    .product {
        padding: 10px;
    }

    .product img {
        height: 100px;
    }

    .product .name {
        font-size: 13px;
        margin-top: 8px;
    }

    .product .mg {
        font-size: 12px;
    }

    .product .price {
        font-size: 13px;
        margin-top: 3px;
    }

    .product button {
        margin-top: 8px;
        padding: 8px;
        font-size: 12px;
    }

    #cartButton {
        bottom: 16px;
        right: 16px;
        padding: 12px 18px;
        font-size: 14px;
    }

    #cartWidget {
        width: 100%;
        right: -100%;
        padding: 20px;
        box-sizing: border-box;
    }

    #cartWidget.open {
        right: 0;
    }

    #notification {
        font-size: 14px;
        padding: 12px 20px;
    }

    #notification.show {
        top: 16px;
    }
}

@media (max-width: 480px) {
    body {
        padding: 10px;
        padding-bottom: 70px;
    }

    header {
        font-size: 20px;
    }

    .layer {
        gap: 8px;
    }

    .layer .product {
        min-width: 130px;
    }

    .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: 8px;
    }

    .product {
        padding: 8px;
    }

    .product img {
        height: 90px;
    }

    .product .name {
        font-size: 12px;
    }

    .product .mg {
        font-size: 11px;
    }

    .product .price {
        font-size: 12px;
    }

    .product button {
        font-size: 11px;
        padding: 7px;
    }
}
</style>
</head>
<body>

<div id="notification">✓ Zum Warenkorb hinzugefügt</div>

<div class="header-container">
  <header>BlopperShop</header>
  <button id="filterButton" onclick="toggleFilter()">Filter</button>
</div>

<div id="filterMenu">
  <button onclick="setFilter('all')" class="active">Alle</button>
  <button onclick="setFilter('mittelgaenger')">Mittel</button>
  <button onclick="setFilter('stark')">Stark</button>
  <button onclick="setFilter('extrastark')">Extra Stark</button>
</div>

<h6>Einzigartig. Sicher. Snus.</h6>

<div id="shop"></div>

<button id="moreButton" onclick="toggleExtra()">Mehr Anzeigen</button>

<button id="cartButton" onclick="toggleCart()">Warenkorb</button>

<div id="extraWidget" class="">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
    <h2>Weitere Produkte</h2>
    <button onclick="toggleExtra()" style="width:auto;">✕</button>
  </div>
  <div id="extraProducts" class="product-grid"></div>
</div>

<div id="cartWidget" class="">
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <h3>Warenkorb</h3>
    <button onclick="toggleCart()" style="width:auto;">✕</button>
  </div>
  <div id="cartItems"></div>
  <div id="cartTotal" style="margin-top:10px;font-weight:bold;"></div>
  <input id="nameField" placeholder="Dein Name" />
  <button onclick="checkout()" style="margin-top:10px;width:100%;">Bestellen</button>
</div>

<script>
const cart = [];
let currentFilter = 'all';

function showNotification() {
    const notif = document.getElementById("notification");
    notif.classList.add('show');
    
    setTimeout(() => {
        notif.classList.remove('show');
    }, 2000);
}

function addToCart(product, cost) {
    cart.push({ product, cost });
    showNotification();
}

function toggleFilter() {
    const menu = document.getElementById("filterMenu");
    menu.classList.toggle('open');
}

function setFilter(filter) {
    currentFilter = filter;
    
    // Update active button
    const buttons = document.querySelectorAll('#filterMenu button');
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Close menu
    toggleFilter();
    
    // Re-render products
    renderProducts();
}

function toggleCart() {
    const w = document.getElementById("cartWidget");
    w.classList.toggle('open');
    renderCart();
}

function toggleExtra() {
    const w = document.getElementById("extraWidget");
    w.classList.toggle('open');
    renderExtraProducts();
}

function renderCart() {
    const box = document.getElementById("cartItems");
    const totalBox = document.getElementById("cartTotal");
    box.innerHTML = "";

    let total = 0;

    if (cart.length === 0) {
        box.innerHTML = "<p>Leer</p>";
        totalBox.textContent = "";
        return;
    }

    cart.forEach((item, idx) => {
        const div = document.createElement("div");
        div.style.display = "grid";
        div.style.gridTemplateColumns = "1fr auto auto";
        div.style.gap = "8px";
        div.style.alignItems = "center";
        div.style.marginBottom = "8px";

        const nameSpan = document.createElement("span");
        nameSpan.textContent = item.product;

        const priceSpan = document.createElement("span");
        priceSpan.textContent = item.cost + " €";
        priceSpan.style.textAlign = "right";
        priceSpan.style.color = "#555";

        const btn = document.createElement("button");
        btn.textContent = "✕";
        btn.style.width = "auto";
        btn.style.padding = "4px 8px";
        btn.onclick = () => {
            cart.splice(idx, 1);
            renderCart();
        };

        div.appendChild(nameSpan);
        div.appendChild(priceSpan);
        div.appendChild(btn);
        box.appendChild(div);
        total += parseFloat(item.cost);
    });

    totalBox.textContent = `Endpreis: ${total.toFixed(2)} €`;
}

function checkout() {
    if (cart.length === 0) return alert("Warenkorb ist leer");

    let total = 0;
    let products = [];
    cart.forEach(i => {
        total += parseFloat(i.cost);
        products.push(i.product);
    });

    const summary = `Produkte: ${products.map((p, i) => `${p.padEnd(20, ' ')} ${cart[i].cost} €`).join("\n")} Endpreis: ${total.toFixed(2)} €`;
    if (!confirm(summary + "\n\nBestätigen?")) return;

    const name = document.getElementById("nameField").value;
    if (!name) return alert("Name fehlt");

    const message = `${name}; ${products.join(", ")}; ${total.toFixed(2)} €`;

    fetch("https://ntfy.sh/snus2ktyp69420187", {
        method: "POST",
        body: message
    });

    alert("Bestellung abgeschickt");
    cart.length = 0;
    document.getElementById("nameField").value = "";
    renderCart();
}

const products = [
  { name: "Pablo Ice Cold",  price: "4.99", mg: "30mg/g", image: "Produkte/PIcecold.jpeg", category: "stark" },
  { name: "Pablo Red",  price: "4.99", mg: "30mg/g", image: "Produkte/PRed.jpeg", category: "stark" },
  { name: "Pablo Exclusive Pear",  price: "4.99", mg: "50mg/g", image: "Produkte/Pear.jpeg", category: "stark" },
  { name: "Pablo Exclusive Kiwi",  price: "4.99", mg: "50mg/g", image: "Produkte/Kiwi.jpeg", category: "stark" },
  { name: "Pablo Exclusive Orange",  price: "4.99", mg: "50mg/g", image: "Produkte/Orange.jpeg", category: "stark" },
  { name: "Pablo Exclusive Strawberry Watermelon",  price: "4.99", mg: "50mg/g", image: "Produkte/Strawberrywatermelon.jpeg", category: "stark" },
  { name: "Pablo Exclusive Lemonade",  price: "4.99", mg: "50mg/g", image: "Produkte/Lemonade.jpeg", category: "stark" },
  { name: "Pablo Exclusive Sour Blueberries",  price: "4.99", mg: "50mg/g", image: "Produkte/Sourblueberry.jpeg", category: "stark" },
  { name: "Pablo Exclusive Tropical Punch",  price: "4.99", mg: "50mg/g", image: "Produkte/Tropicalpunch.jpeg", category: "stark" },
  { name: "Pablo Exclusive Blue Raspberry", price: "4.99", mg: "50mg/g", image: "Produkte/Blueraspberry.jpeg", category: "stark" },
  { name: "Pablo Exclusive Passion Fruit", price: "4.99", mg: "50mg/g", image: "Produkte/Passionfruit.jpeg", category: "stark" },
  { name: "Pablo Blueberry Peach Ice", price: "4.99", mg: "50mg/g", image: "Produkte/Blueberrypeachice.jpeg", category: "stark" },
  { name: "Pablo Strawberry Kiwi", price: "4.99", mg: "50mg/g", image: "Produkte/Strawberrykiwi.jpeg", category: "stark" },
  { name: "Pablo Banana Ice", price: "4.99", mg: "50mg/g", image: "Produkte/Bananaice.jpeg", category: "stark" },
  { name: "Pablo Strawberry Lynchee", price: "4.99", mg: "50mg/g", image: "Produkte/Strawberrylynchee.jpeg", category: "stark" },
  { name: "Pablo Exclusive Frosted Mint", price: "4.99", mg: "50mg/g", image: "Produkte/Frostedmint.jpeg", category: "stark" },
  { name: "Pablo Mango Ice", price: "4.99", mg: "50mg/g", image: "Produkte/MangoIce.jpeg", category: "stark" },
  { name: "Pablo Grape Ice", price: "4.99", mg: "50mg/g", image: "Produkte/Grapeice.jpeg", category: "stark" },

  { name: "Cuba Grape", price: "4.99", mg: "43mg/g", image: "Produkte/CGrape.jpeg", category: "extrastark" },
  { name: "Cuba Banana Hit", price: "4.99", mg: "43mg/g", image: "Produkte/CBananaHit.jpeg", category: "extrastark" },
  { name: "Cuba Cherry", price: "4.99", mg: "43mg/g", image: "Produkte/CCherry.jpeg", category: "extrastark" },
  { name: "Cuba Peach", price: "4.99", mg: "43mg/g", image: "Produkte/CPeach.jpeg", category: "extrastark" },
  { name: "Cuba Black Currant", price: "4.99", mg: "43mg/g", image: "Produkte/CBlackCurrant.jpeg", category: "extrastark" },
  { name: "Cuba Cola", price: "4.99", mg: "43mg/g", image: "Produkte/CCola.jpeg", category: "extrastark" },
  { name: "Cuba Apple Juice", price: "4.99", mg: "43mg/g", image: "Produkte/CAppleJuice.jpeg", category: "extrastark" },
  { name: "Cuba Watermelon", price: "4.99", mg: "43mg/g", image: "Produkte/CWatermelon.jpeg", category: "extrastark" },
  { name: "Cuba Forest Berries", price: "4.99", mg: "43mg/g", image: "Produkte/CForestBerries.jpeg", category: "extrastark" },
  { name: "Cuba Blueberry", price: "4.99", mg: "43mg/g", image: "Produkte/CBlueberry.jpeg", category: "extrastark" },

  { name: "Iceberg Kiwi Strawberry", price: "4.99", mg: "50mg/g", image: "Produkte/ICKiwiStrawberry.jpeg", category: "extrastark" },
  { name: "Iceberg Dragon Fire", price: "4.99", mg: "50mg/g", image: "Produkte/ICDragonFire.jpeg", category: "extrastark" },
  { name: "Iceberg Emerald", price: "4.99", mg: "50mg/g", image: "Produkte/ICEmerald.jpeg", category: "extrastark" },
  { name: "Iceberg Crazy Mix", price: "4.99", mg: "50mg/g", image: "Produkte/ICCrazyMix.jpeg", category: "extrastark" },
  { name: "Iceberg Cherry Apricot Gum", price: "4.99", mg: "50mg/g", image: "Produkte/ICCherryApricotGum.jpeg", category: "extrastark" },
  { name: "Iceberg Strawberry Mango Gum", price: "4.99", mg: "50mg/g", image: "Produkte/ICStrawberryMangoGum.jpeg", category: "extrastark" },
  { name: "Iceberg Cola", price: "4.99", mg: "50mg/g", image: "Produkte/ICCola.jpeg", category: "extrastark" },
  { name: "Iceberg Wild Berries", price: "4.99", mg: "50mg/g", image: "Produkte/ICWildBerries.jpeg", category: "extrastark" },
  { name: "Iceberg Strawberry Pomegranate", price: "4.99", mg: "50mg/g", image: "Produkte/ICStrawberryPomegranate.jpeg", category: "extrastark" },
  { name: "Iceberg Apple Lemon Pineapple", price: "4.99", mg: "50mg/g", image: "Produkte/ICAppleLemonPineapple.jpeg", category: "extrastark" },
  { name: "Iceberg Mango Banana", price: "30.00", mg: "50mg/g", image: "Produkte/ICMangoBanana.jpeg", category: "extrastark" },
  { name: "Iceberg Melon Peach", price: "4.99", mg: "50mg/g", image: "Produkte/ICMelonPeach.jpeg", category: "extrastark" },
  { name: "Iceberg Grape", price: "4.99", mg: "50mg/g", image: "Produkte/ICGrape.jpeg", category: "extrastark" },
  { name: "Iceberg Sour Berries", price: "4.99", mg: "50mg/g", image: "Produkte/ICSourBerries.jpeg", category: "extrastark" },
  { name: "Iceberg Guava Lime", price: "4.99", mg: "50mg/g", image: "Produkte/ICGuavaLime.jpeg", category: "extrastark" },
  { name: "Iceberg Arasaka", price: "4.99", mg: "50mg/g", image: "Produkte/ICArasaka.jpeg", category: "extrastark" },
];

// Extra Produkte für "Mehr Anzeigen"
const extraProducts = [
  { name: "Killa Lemonade", price: "4.99", mg: "16mg/g", image: "Produkte/KLemonade.jpeg", category: "mittelgaenger" },
  { name: "Killa Apple", price: "4.99", mg: "16mg/g", image: "Produkte/KApple.jpeg", category: "mittelgaenger" },
  { name: "Killa Blueberry", price: "4.99", mg: "16mg/g", image: "Produkte/KBlueberry.jpeg", category: "mittelgaenger" },
  { name: "Killer Blue Raspberry", price: "4.99", mg: "16mg/g", image: "Produkte/KBlueRaspberry.jpeg", category: "mittelgaenger" },
  { name: "Killer Cola", price: "4.99", mg: "16mg/g", image: "Produkte/KCola.jpeg", category: "mittelgaenger" },
  { name: "Killer Cold Mint", price: "4.99", mg: "16mg/g", image: "Produkte/KColdMint.jpeg", category: "mittelgaenger" },
  { name: "Killer Dark Cherry", price: "4.99", mg: "16mg/g", image: "Produkte/KDarkCherry.jpeg", category: "mittelgaenger" },
  { name: "Killer Grape Ice", price: "4.99", mg: "16mg/g", image: "Produkte/KGrapeIce.jpeg", category: "mittelgaenger" },
  { name: "Killer Mango Ice", price: "4.99", mg: "16mg/g", image: "Produkte/KMangoIce.jpeg", category: "mittelgaenger" },
  { name: "Killer Orange", price: "4.99", mg: "16mg/g", image: "Produkte/KOrange.jpeg", category: "mittelgaenger" },
  { name: "Killer Pineapple", price: "4.99", mg: "16mg/g", image: "Produkte/KPineapple.jpeg", category: "mittelgaenger" },
  { name: "Killer Strawberry Lynchee", price: "4.99", mg: "16mg/g", image: "Produkte/KStrawberryLynchee.jpeg", category: "mittelgaenger" },
];

function renderProducts() {
    const shop = document.getElementById("shop");
    shop.innerHTML = "";
    
    // Get all products (main + extra) and filter
    let allProducts = [...products, ...extraProducts];
    let filteredProducts = allProducts.filter(p => !p.name.startsWith("Produkt "));
    
    if (currentFilter !== 'all') {
        filteredProducts = filteredProducts.filter(p => p.category === currentFilter);
    }
    
    // Show in grid if filtered, show in rows if "all"
    if (currentFilter === 'all') {
        // Original row layout - only main products
        let mainProducts = products.filter(p => !p.name.startsWith("Produkt "));
        let index = 0;
        const rowSizes = [18, 10, 16];

        for (let layer = 0; layer < 3; layer++) {
            const row = document.createElement("div");
            row.className = "layer";

            const itemsInRow = rowSizes[layer];
            
            for (let i = 0; i < itemsInRow && index < mainProducts.length; i++) {
                const p = mainProducts[index];

                const div = document.createElement("div");
                div.className = "product";
                div.innerHTML = `
                    <img src="${p.image}">
                    <div class="name">${p.name}</div>
                    <div class="mg">${p.mg}</div>
                    <div class="price">${p.price} €</div>
                    <button onclick="addToCart('${p.name}', '${p.price}')">
                        In den Warenkorb
                    </button>
                `;

                row.appendChild(div);
                index++;
            }

            shop.appendChild(row);
        }
    } else {
        // Grid layout for filtered products (including extra products)
        const grid = document.createElement("div");
        grid.className = "product-grid";
        
        filteredProducts.forEach(p => {
            const div = document.createElement("div");
            div.className = "product";
            div.innerHTML = `
                <img src="${p.image}">
                <div class="name">${p.name}</div>
                <div class="mg">${p.mg}</div>
                <div class="price">${p.price} €</div>
                <button onclick="addToCart('${p.name}', '${p.price}')">
                    In den Warenkorb
                </button>
            `;
            grid.appendChild(div);
        });
        
        shop.appendChild(grid);
    }
}

function renderExtraProducts() {
    const container = document.getElementById("extraProducts");
    container.innerHTML = "";
    
    // Filter extra products
    let filteredExtra = currentFilter === 'all' 
        ? extraProducts 
        : extraProducts.filter(p => p.category === currentFilter);
    
    filteredExtra.forEach(p => {
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
            <img src="${p.image}">
            <div class="name">${p.name}</div>
            <div class="mg">${p.mg}</div>
            <div class="price">${p.price} €</div>
            <button onclick="addToCart('${p.name}', '${p.price}')">
                In den Warenkorb
            </button>
        `;
        container.appendChild(div);
    });
}

// Initial render
renderProducts();
</script>
<div class="footer-text">
<h4>© Blopperbold GMBH und Co.KG. Alle Rechte vorbehalten.</h4>
<h5>Diese Seite ist nur eine Überleitungsstelle, keine Bestellungen werden von uns gehandelt.</h5>
<h6>Der Verkauf von Snus an Personen unter 18 Jahren ist verboten. Bitte kaufe und konsumiere verantwortungsbewusst.</h6>
<h6>Update 1.7</h6>
</div>
</body>
</html>